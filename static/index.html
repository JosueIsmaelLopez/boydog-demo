<!DOCTYPE html>
<meta charset="utf-8">
<title>ShareDB Textarea</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
<style>
body {
  background: #ddd;
}
#container {
  position: absolute;
  top: 24px;
  right: 24px;
  bottom: 24px;
  left: 24px;
}
textarea {
  font: 14px/1.3 sans-serif;
  padding: 4px 8px;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}
#title {
  font-size: 24;
}
</style>

<div id="container">
  <h1 id="title">Text Area Example with Reconnecting Websockets</h1>
  <p>Connection Status: <span id="status-span"></span></p>
  <input id="inp" />
</div>

<script src="dist/bundle.js"></script>
<script>
  var sharedb = window.dog.shareDB;
  var rWebSocket = window.dog.rWebSocket;
  var StringBinding = window.dog.stringBinding;
  
  var socket = new rWebSocket('ws://' + window.location.host);
  var connection = new sharedb.Connection(socket);

  var element = document.querySelector('input');

  // Create local Doc instance mapped to 'examples' collection document with id 'textarea'
  var doc = connection.get('examples', 'randomABC');
  doc.subscribe(function(err) {
    if (err) throw err;
    
    var binding = new StringBinding(element, doc, ['content']);
    binding.setup();
  });
</script>
